# Bonsai Care Documenta√ß√£o e Estrutura do Projeto

Aplicativo web para o gerenciamento de cuidados com bonsais, desenvolvido em Next.js, TypeScript e Supabase.
Este documento detalha a arquitetura, a estrutura de pastas, o funcionamento do backend e integra√ß√µes, al√©m de informa√ß√µes para desenvolvedores que desejam contribuir ou realizar manuten√ß√£o.

## Tecnologias/Linguagens

1. Next.js:
> O que √©:
Framework baseado em React, usado para criar sites e aplica√ß√µes web. Funciona tanto no frontend quanto no backend.
> Exemplo/descri√ß√£o:
Permite criar p√°ginas que carregam r√°pido, podem ser atualizadas em tempo real e ser responsivas.
> Papel no projeto:
Todas as telas e rotas (Caminhos para as paginas) do sistema s√£o constru√≠das com Next.js, o que garante melhor desempenho e organiza√ß√£o do projeto.

2. React:
> O que √©:
√â uma biblioteca de js para cria√ß√£o de interfaces(UI).
> Exemplo/descri√ß√£o:
Cada parte da tela (bot√µes, cards, formul√°rios) √© um ‚Äúcomponente‚Äù independente, o que facilita ajustes e reutiliza√ß√£o, ou seja √© como se eu criasse um √∫nico desing e reutilizasse, como nos bot√µes.
> Papel no projeto:
√â usado para montar as telas e deixar o app responsivo, sem precisar recarregar a p√°gina inteira.

3. TypeScript:
> O que √©:
Uma linguagem baseada em JavaScript, mas com tipagem, o que ajuda a evitar erros e tornar o c√≥digo mais previs√≠vel (Tipagem √© como definir o tipo da variavel, exemplo se √© int ou string).
> Exemplo/descri√ß√£o:
Enquanto o JavaScript aceita qualquer tipo de dado (n√∫mero, txt, etc.), o TypeScript aceita somente o tipo pr√©-definido.
> Papel no projeto:
Utilizado para fazer o banckend, pois ajuda a garantir que os dados vindos do banco (como perfis e plantas) estejam sempre no formato certo.

4. Supabase:
> O que √©:
Plataforma/site que oferece banco de dados de forma web, tamb√©m fornece autentica√ß√£o de usu√°rios e armazenamento de arquivos em um √∫nico lugar.
> Exemplo/descri√ß√£o:
√â um banco de dados, mas baseado em PostgreSQL, o que faz ser um banco de dados robusto e seguro.
> Papel no projeto:
O Supabase cuida do login, do banco de dados e do envio de imagens (como fotos de perfil e plantas), sem precisar de um servidor pr√≥prio.

5. PostgreSQL:
> O que √©:
√â uma linguagem voltada para banco de dados (como por exemplo o SQL), que ao mesmo tempo √© sistema de banco de dados relacional, usado para armazenar informa√ß√µes de forma organizada.
> Exemplo/descri√ß√£o:
√â o que permite criar as tabelas e os relacionadas, como ‚Äúusu√°rios‚Äù, ‚Äúplantas‚Äù e ‚Äúpostagens‚Äù, que se conectam entre si.
> Papel no projeto:
√â o sistema de banco de dados que armazena os dados do projeto (perfis, plantas, publica√ß√µes, etc.), sendo acessado via Supabase.

6. Tailwind CSS:
> O que √©:
√â um framework para estilizar sites diretamente no c√≥digo, sem precisar criar arquivos CSS separados.
> Exemplo/descri√ß√£o:
Usa classes como bg-green-500 ou text-center para definir cores, tamanhos e alinhamentos rapidamente (Ou seja, faz o css "inline").
> Papel no projeto:
Respons√°vel pela parte visual ‚Äî Espa√ßamento e responsividade s√£o controlados por ele.

## Funcionalidades

> Autentica√ß√£o de usu√°rios com Supabase Auth
> Armazenamento de dados com PostgreSQL
> Upload e hospedagem de imagens com Supabase Storage
> Interface moderna com Next.js (App Router) e Tailwind CSS
> Componentiza√ß√£o via shadcn/ui e tipagem completa em TypeScript

## üóÇÔ∏è Estrutura geral

bonsai-care/
‚îÇ
‚îú‚îÄ public/ ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†# Arquivos est√°ticos e imagens
‚îÇ ¬†‚îú‚îÄ images/
‚îÇ ¬†‚îÇ ¬†‚îú‚îÄ logo.jpeg
‚îÇ ¬†‚îÇ ¬†‚îî‚îÄ placeholder.svg
‚îÇ
‚îú‚îÄ prisma/ ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†# Esquema de como o banco √©
‚îÇ ¬†‚îî‚îÄ schema.prisma
‚îÇ
‚îú‚îÄ src/
‚îÇ ¬†‚îú‚îÄ app/ ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†# P√°ginas do site
‚îÇ ¬†‚îÇ ¬†‚îú‚îÄ layout.tsx ¬† ¬† ¬† ¬† # Layout global (Desing padr√£o das telas)
‚îÇ ¬†‚îÇ ¬†‚îú‚îÄ page.tsx ¬† ¬† ¬† ¬† ¬† # P√°gina inicial (P√°gina antes de realizar login)
‚îÇ ¬†‚îÇ ¬†‚îú‚îÄ dashboard/ ¬† ¬† ¬† ¬† # Tela dashboard principal do usu√°rio (Tela inicial ap√≥s logar)
‚îÇ ¬†‚îÇ ¬†‚îú‚îÄ plants/ ¬† ¬† ¬† ¬† ¬† ¬†# Telas que habilitam op√ß√£o de criar, editar, excluir e consultar plantas
‚îÇ ¬†‚îÇ ¬†‚îú‚îÄ auth/ ¬† ¬† ¬† ¬† ¬† ¬† ¬†# Telas Login & Cadastro
‚îÇ ¬†‚îÇ ¬†‚îú‚îÄ calendar/ ¬† ¬† ¬† ¬† ¬†# Tela de Calendario
‚îÇ ¬†‚îÇ ¬†‚îú‚îÄ feed/ ¬† ¬† ¬† ¬† ¬† ¬† ¬†# Tela de feed que permite vizualizar post
‚îÇ ¬†‚îÇ ¬†‚îú‚îÄ posts/ ¬† ¬† ¬† ¬† ¬† ¬† # Tela que busca post + planta + perfil + curtidas + coment√°rios
‚îÇ ¬†‚îÇ ¬†‚îú‚îÄ profile/ ¬† ¬† ¬† ¬† ¬† # Tela lhe mostra o perfil e lhe permite editar
‚îÇ ¬†‚îÇ ¬†‚îî‚îÄ search/ ¬† ¬† ¬† ¬† ¬† ¬†# Tela que aparece ap√≥s realizar uma pesquisa
‚îÇ ¬†‚îÇ
‚îÇ ¬†‚îú‚îÄ components/ ¬† ¬† ¬† ¬† ¬† # Componentes reutiliz√°veis (V√£o ser partes do desing)
‚îÇ ¬†‚îÇ ¬†‚îú‚îÄ calendar/ ¬† ¬† ¬† ¬† ¬†# Componentes do calendario
‚îÇ ¬†‚îÇ ¬†‚îú‚îÄ feed/ ¬† ¬† ¬† ¬† ¬† ¬† ¬†# Componentes do feed
‚îÇ ¬†‚îÇ ¬†‚îú‚îÄ search/ ¬† ¬† ¬† ¬† ¬† ¬†# Componentes da parte de busca
‚îÇ ¬†‚îÇ ¬†‚îú‚îÄ layout/ ¬† ¬† ¬† ¬† ¬† ¬†# Layouts e estruturas fixas (exemplo: Header)
‚îÇ ¬†‚îÇ ¬†‚îú‚îÄ plants/ ¬† ¬† ¬† ¬† ¬† ¬†# Componentes espec√≠ficos de plantas
‚îÇ ¬†‚îÇ ¬†‚îú‚îÄ profile/ ¬† ¬† ¬† ¬† ¬† # Componentes de perfil
‚îÇ ¬†‚îÇ ¬†‚îî‚îÄ ui/ ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†# Componentes base (shadcn/ui)
‚îÇ ¬†‚îÇ
‚îÇ ¬†‚îú‚îÄ hooks/ ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†# Hooks customizados
‚îÇ ¬†‚îÇ ¬†‚îú‚îÄ use-toast.ts ¬† ¬† ¬† # Notifica√ß√µes e toasts globais
‚îÇ ¬†‚îÇ ¬†‚îî‚îÄ use-profile.ts ¬† ¬† # Hook de carregamento de perfil do usu√°rio logado
‚îÇ ¬†‚îÇ
‚îÇ ¬†‚îú‚îÄ lib/ ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†# Integra√ß√µes, utilit√°rios e tipagens
‚îÇ ¬†‚îÇ ¬†‚îú‚îÄ supabase/
‚îÇ ¬†‚îÇ ¬†‚îÇ ¬†‚îú‚îÄ client.ts ¬† ¬† ¬† # Cria uma conex√£o do Supabase para o frontend
‚îÇ ¬†‚îÇ ¬†‚îÇ ¬†‚îú‚îÄ serverClient.ts # Cria uma conex√£o do Supabase para o backend (SSR)
‚îÇ ¬†‚îÇ ¬†‚îÇ ¬†‚îî‚îÄ middleware.ts ¬† # Atualiza√ß√£o de sess√£o e prote√ß√£o de rotas para caso troque de tela/p√°gina
‚îÇ ¬†‚îÇ ¬†‚îú‚îÄ profile.ts ¬† ¬† ¬† ¬† # Tipagens e helpers para perfis
‚îÇ ¬†‚îÇ ¬†‚îî‚îÄ types.ts ¬† ¬† ¬† ¬† ¬† # Esquema de como est√£o as tabelas no supabase
‚îÇ ¬†‚îÇ
‚îÇ ¬†‚îî‚îÄ styles/
‚îÇ ¬† ¬† ‚îî‚îÄ globals.css ¬† ¬† ¬† ¬†# Paleta de cores do site, vari√°veis globais e estilo basico
‚îÇ
‚îî‚îÄ package.json ¬† ¬† ¬† ¬† ¬† ¬† # Depend√™ncias e scripts do projeto

## Desing do site

> Este projeto usa Tailwind CSS para estiliza√ß√£o e shadcn/ui para componentes visuais padronizados (Ou seja √© um framework de CSS).
A paleta principal segue tons esverdeados e naturais, representando a tem√°tica de bonsais.

> Layout Global do site (src/app/layout.tsx), ele que define a estrutura base de todas as p√°ginas e adiciona o Header e o Toaster global.

## Estrutura do Banco de Dados (Supabase)
1. O projeto utiliza o Supabase para o banco de dados, incluindo Autentica√ß√£o e e fun√ß√µes do backend, sendo no modelo (Supabase PostgreSQL).

> Todas as tabelas seguem um padr√£o num√©rico (tb01_, tb02_...), segue descri√ß√£o das tabelas:

tb01_perfis ¬† ¬† ¬† ¬† ¬† ¬† # Dados do perfil do usu√°rio (nome, bio, avatar, etc)
tb02_plantas ¬† ¬† ¬† ¬† ¬† ¬†# Plantas cadastradas por cada usu√°rio
tb03_publicacoes ¬† ¬† ¬† ¬†# Postagens e atualiza√ß√µes das plantas
tb04_curtidas ¬† ¬† ¬† ¬† ¬† # Likes das publica√ß√µes
tb05_comentarios ¬† ¬† ¬† ¬†# Coment√°rios nas publica√ß√µes
tb06_lembretes_cuidado ¬†# Lembretes de cuidados (rega, poda, etc)

2. Autentica√ß√£o e Sess√µes:

# Explica√ß√£o:
> Login e registro por email/senha, sendo realizado uma verifica√ß√£o via email para cadastro.
> Armazenamento seguro de tokens em cookies HttpOnly. (Ou seja utiliza cookies)
> Middleware (lib/supabase/middleware.ts) mant√©m a sess√£o ativa entre SSR e navega√ß√£o client-side. (Deixa o usuario sempre conectado)
> Redirecionamentos autom√°ticos para /auth/login em p√°ginas protegidas. (Nas telas caso voc√™ n√£o esteja logado ser√° redirecionado para realizar o login)

# Exemplo de como funciona o esquema de login com cookies:
> Supabase realiza a autentica√ß√£o (auth.users)
> Se for verdadeiro ele vai gerar um token de sess√£o.
> Esse token √© armazenado nos cookies e validado automaticamente via middleware.
> Em caso de n√£o estar logado o middleware redireciona para /auth/login.
> O Header acessa o usu√°rio e exibe seu avatar e nome.

3. Storage & bucket:

> Armazena imagens de avatares e plantas.
> Bucket: avatares e plantas

## Resumo:

### public/
> Cont√©m os arquivos est√°ticos, como as imagens
public/
‚îú‚îÄ images/
‚îÇ ‚îú‚îÄ logo.jpeg
‚îî‚îÄ placeholder.svg

### üíª src/
> Cont√©m o c√≥digo fonte, segue a estrutura:
src/
‚îú‚îÄ app/
‚îú‚îÄ components
‚îú‚îÄ hooks/
‚îî‚îÄlib/

#### app/
> Cada pasta dentro de `app` corresponde a uma rota. Arquivos `page.tsx` representam p√°ginas acess√≠veis via URL.

#### components/
> Cont√©m todos os componentes reutiliz√°veis de interface (UI e layout), como por exemplo bot√µes e header. Os componentes s√£o organizados por fun√ß√£o.
> Header n√£o aparece diretamente no c√≥digo das telas, pois ele √© tratado como um componente que √© importado em `src/app/layout.tsx`, fazendo com que as telas tenham o Header por padr√£o, √© poss√≠vel alterar o desing do Header acessando `src/components/layout/header.tsx`.

#### hooks/
> Cont√©m custom hooks (fun√ß√µes que podem ser reutilizadas) do React, neste caso s√©ria em sumo as notifa√ß√µes.
> `user-profile.ts` vai estar realizando a conex√£o b√°sica para trazer o usu√°rio para que possa ser carregado no Header.

#### lib/
> Cont√©m integra√ß√µes e utilit√°rios de backend/front para acessar o banco de dados
Aqui ficam arquivos relacionados a:
- profile.ts: Realiza a tipagem de dados do perfil;
- types.ts: Realiza a tipagem de dados do supabase/banco de dados;
- Supabase (autentica√ß√£o e banco), sendo:
¬† ¬† - client.ts (frontend);
¬† ¬† - severClient.ts (backend);
¬† ¬† - middleware.ts (sess√µes);

## Observa√ß√µes:
> O projeto utiliza nos imports "@", que seria o mesmo de "src/", est√° configura√ß√£o √© realizada em tsconfig.json
> Ao atualizar `src/app/layout.tsx` ser√° realizada uma altera√ß√£o em todas as `page.tsx`
> O global.css `src/app/global.css` √© responsavel por trazer o desing b√°sico de fundo das telas e guardar variasveis de cor